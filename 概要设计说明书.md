**概要设计说明书**

 

| 文件状态：   [  ] 草稿   [√] 正式发布   [  ] 正在修改 | 文件标识： | SERC-XXXX-RD-XX |
| ----------------------------------------------------- | ---------- | --------------- |
| 当前版本：                                            | 1.0        |                 |
| 作    者：                                            |            |                 |
| 完成日期：                                            |            |                 |

 

# 1引言

## 1.1编写目的

本阶段是在系统的需求分析的基础上，对电子日记本APP做的概要设计。主要解决实现该系统需求的模块设计问题。包括把该系统划分成哪些模块、决定各个模块之间的接口、模块之间传递的信息等。

​    在下一阶段的详细设计中，设计人员可以参考此《概要设计说明书》，在概要设计对电子日记本APP所做的模块结构设计的基础上，对系统进行详细设计。在以后的软件测试以及软件维护阶段也可参考此说明书，以便于了解在概要设计过程中所完成的各模块设计结构，或在修改时找出在本阶段设计的不足或错误。

## 1.2项目背景

l  随着科技的不断进步，电子产品越来越普及，几乎所有人都持有至少一个智能设备。与此同时，以往的纸质日记本已经无法满足用户随身携带、随时随地记录、分享日记给他人，以及记录音频图像日记的需求，为了迎合市场对智能设备端日记本的需求，基于我公司文化背景和创办理念，决定推出一款具有独特风格的日记本软件。

l  待开发的软件系统的名称为：电子日记本APP

l  项目的任务提出者： 

l  项目开发者为：Javaer 集

本系统的用户：具有Android6.0以上系统且有记录日常心情、活动等等需求的安卓端移动智能设备用户，用户可以以文字及多媒体形式记录相应内容，可对每篇日记标记当日心情，以及通过各大社交平台（QQ、微信等等）向好友分享自己的日记。

## 1.3参考资料

[1]    《系统项目计划任务书》，大鹏航空公司，2005/7

[2]    《系统项目开发计划》，软件工程科研组，2005/7

[3]    《软件需求说明书》，软件工程科研组，2005/7

[4]    《用户操作手册（初稿）》，软件工程科研组，2005/4

 

# 2总体设计

## 2.1需求规定

具体要求包括：

高优先级- 记录文字日记功能。支持字体大小设置、字体格式设置、字体样式设置，支持背景颜色选择；

高优先级- 日记添加多媒体功能。支持插入图片并调整尺寸，支持从相册和拍照选择图片；支持录入语音的形式添加日记；

高优先级- 日记心情标签功能。支持添加不同日记的不同心情标签，比如喜怒哀乐等；

高优先级- 编辑日记功能。支持添加日记、删除日记、根据时间日期和关键字查找日记、修改日记功能；

中优先级- 私密日记功能。提供需经过解锁可见的私密日记区，解锁方式包含不止于英文字母数字排列组合，提供更个性化的手势密码；

中优先级- 日记云端存储功能。支持日记的云端存储，可登陆账户选择将日记同步至云端；

中优先级- 分享日记功能。支持用户可自行选择日记分享至微信、微博、QQ等主流社交平台；

低优先级- 记录语音日记功能。支持录入语音的形式添加日记。

*注：优先实现高优先级需求，低优先级需求如遇时间困难可在下一版本实现。

## 2.2运行环境

本系统基于Android6.0系统进行运行。

## 2.3基本设计概念和处理流程

说明本系统的基本设计概念和处理流程，尽量使用图表的形式。

## 2.4结构

用一览表及框图的形式说明本系统的系统元素（各层模块、子程序、公用程序等）的划分，扼要说明每个系统元素的标识符和功能，分层次地给出各元素之间的控制与被控制关系.


 

## 2.5功能需求与程序的关系

本条用一张如下的矩阵图说明各项功能需求的实现同各块程序的分配关系：

|              | 记录日记模块 | 登录注册模块 | 日记同步模块 | 日记分享模块 | 加密模块 | 用户管理模块 |
| ------------ | ------------ | ------------ | ------------ | ------------ | -------- | ------------ |
| 记录文字日记 | √            |              |              |              |          |              |
| 添加多媒体   | √            |              |              |              |          |              |
| 心情标签     | √            |              |              |              |          |              |
| 编辑日记     | √            |              |              |              | √        |              |
| 私密日记     | √            |              |              |              | √        |              |
| 云端存储     |              | √            | √            |              |          | √            |
| 日记分享     |              |              |              | √            |          |              |
| 浏览日记     |              |              |              |              | √        |              |
|              |              |              |              |              |          |              |

# 3接口设计

## 3.1用户接口

日记管理模块主要通过编辑器与用户进行交互，提供“保存”，“删除”等按钮供用户对日记进行保存和删除等。 模块与本地数据库进行数据传输，用于保存用户日记数据；

日记分享模块提供给用户日记的分享的按钮；

日记同步模块提供用户单个日记的同步按钮,外部系统可通过上传本地日记到云端，下载云端日记到本地；

用户信息管理提供用户的登录和注册以及重置密码的接口；

日记加密模块对用户提供手势密码和字符密码的接口。

## 3.2外部接口

## 在日记同步模块中，外部系统可通过接口上传本地日记到云端，下载云端日记到本地；

 

## 3.3内部接口

说明本系统之内的各个系统元素之间的接口的安排。

# 4运行设计

## 4.1运行模块组合

说明对系统施加不同的外界运行控制时所引起的各种不同的运行模块组合，说明每种运行所历经的内部模块和支持软件。

## 4.2运行控制

说明每一种外界的运行控制的方式方法和操作步骤。

## 4.3运行时间

说明每种运行模块组合将占用各种资源的时间。

# 5系统数据结构设计

## 5.1逻辑结构设计要点

| 用户表      |             |      |      |          |              |
| ----------- | ----------- | ---- | ---- | -------- | ------------ |
| 属性        | 数据类型    | 主键 | 外键 | 可否为空 | 说明         |
| user_id     | Integer(20) | *    |      | N        | 用户id       |
| user_name   | varchar(20) |      |      | N        | 用户名       |
| password    | varchar(20) |      |      | N        | 密码         |
| create_time | timestamp   |      |      | N        | 注册时间     |
| email       | varchar(50) |      |      | N        | 电子邮箱地址 |

 

| 日记表               |             |      |      |          |                  |
| -------------------- | ----------- | ---- | ---- | -------- | ---------------- |
| 属性                 | 数据类型    | 主键 | 外键 | 可否为空 | 说明             |
| diary_id             | Integer(20) | *    |      | N        | 日记编号         |
| diary_title          | varchar(50) |      |      | N        | 日记标题         |
| diray_path           | varchar(50) |      |      | N        | 日记存储路径     |
| diary_create_time    | timestamp   |      |      | N        | 日记建立时间     |
| diary_last_edit_time | timestamp   |      |      | N        | 日记最后编辑时间 |
| diary_emotion        | varchar(10) |      |      | N        | 心情             |
| diary_tag            | varchar(10) |      |      | N        | 标签             |
| has_password         | varchar(10) |      |      | N        | 日记是否有密码   |

 

| 标签表   |             |      |      |          |          |
| -------- | ----------- | ---- | ---- | -------- | -------- |
| 属性     | 数据类型    | 主键 | 外键 | 可否为空 | 说明     |
| tag_id   | Integer(10) | *    |      | N        | 标签编号 |
| tag_name | varchar(10) |      |      | N        | 标签名称 |

 

| 用户日记表     |             |      |      |          |          |
| -------------- | ----------- | ---- | ---- | -------- | -------- |
| 属性           | 数据类型    | 主键 | 外键 | 可否为空 | 说明     |
| user_id        | Integer(20) | *    |      | N        | 用户编号 |
| diary_id       | Integer(20) | *    |      | N        | 日记编号 |
| sync_time      | timestamp   |      |      | N        | 同步时间 |
| diary_password | varchar(10) |      |      | Y        | 日记密码 |

 

| 用户存储表 |             |      |      |          |          |
| ---------- | ----------- | ---- | ---- | -------- | -------- |
| 属性       | 数据类型    | 主键 | 外键 | 可否为空 | 说明     |
| user_id    | Integer(20) | *    |      | N        | 用户编号 |
| storage    | Integer(10) |      |      | N        | 已存储量 |

 

## 5.2数据结构与程序的关系

本条用一张如下的矩阵图说明各项数据结构与各块程序的分配关系：

|            | 记录日记模块 | 登录注册模块 | 日记同步模块 | 日记分享模块 | 加密模块 | 用户管理模块 |
| ---------- | ------------ | ------------ | ------------ | ------------ | -------- | ------------ |
| 用户表     |              | √            | √            |              |          | √            |
| 日记表     | √            |              | √            |              |          |              |
| 标签表     | √            |              |              |              |          |              |
| 用户日记表 | √            |              | √            |              | √        | √            |
| 用户存储表 |              |              |              |              |          | √            |

 

# 6系统出错处理设计

6.1出错信息

当出现网络连接错误时，采用的处理方式为向用户返回网络连接错误，显示相应的错误信息

当出现系统级错误时，采取的处理方式为向用户返回错误信息，具体为：“对不起，无法获取数据！”

6.2 补救措施

数据库的备份采取每段时间进行一次完全备份，并采取带日志运行的方式当出现数据库级的错误时，采取的方式分为两种：

用数据库的完全备份实现数据库的完全恢复

用数据库的完全备份和日志文件实现数据库的不完全恢复



 